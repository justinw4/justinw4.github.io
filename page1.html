<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="main.css" />
        <script src = "d3.min.js"></script>
    </head>
    <body>
        <!-- Navigation Bar -->
        <div class="navbar">
            <div class="container">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="page1.html">Page 1</a></li>
                    <li><a href="page2.html">Page 2</a></li>
                    <li><a href="page3.html">Page 3</a></li>
                </ul>
            </div>
        </div>

        <!-- Webpage Content -->
        <div class="sections">
            <div id="chart" class="chart" onload='init()'>
                <svg width=1000 height=600></svg>
                <script>
                    async function init() {

                        // Initialize variables
                        var margin = 80;
                        var width = 1000 - (2 * margin);
                        var height = 600 - (2 * margin); 

                        const data = await d3.csv("HomerunStats.csv"); 
                        
                        console.log("Column Headers", data.columns);

                        var svg = d3.select("div#chart").append("svg").attr("width", width).attr("height", height).attr("transform","translate("+margin+","+margin+")"); 
                        var x = d3.scaleLinear().domain([1985, 2020]).range([0,width]);
                        var y = d3.scaleLinear().domain([1000, 7000]).range([height,0]); 

                        // Set up the Lines
                        const lineAL = d3.line().x(function(d) { return x(d.Year); }).y(function(d) { return y(d.AmericanLeague); }); 
                        const lineNL = d3.line().x(function(d) { return x(d.Year); }).y(function(d) { return y(d.NationalLeague); });
                        const lineTotal = d3.line().x(function(d) { return x(d.Year); }).y(function(d) { return y(d.Total); });

                        // Set up the Axis
                        var xAxis = d3.axisBottom(x).tickValues([1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020]).tickFormat(d3.format("~s"));
                        var yAxis = d3.axisLeft(y).tickValues([1000, 2000, 3000, 4000, 5000, 6000, 7000]).tickFormat(d3.format("~s")); 
                        d3.select("svg").append("g")
                            .attr("class", "axis")
                            .attr("transform","translate("+margin+","+margin+")")
                            .call(yAxis); 
                            
                        d3.select("svg").append("g")
                            .attr("transform","translate("+margin+","+(height+margin)+")")
                            .call(xAxis); 

                        // Draw the Lines
                        svg.data(data).enter().append("path").attr("class","line").style("stroke","red").attr("d",lineAL);
                        svg.data(data).enter().append("path").attr("class","line").style("stroke","blue").attr("d",lineNL);
                        svg.data(data).enter().append("path").attr("class","line").attr("d",lineTotal);
                    }
                </script>
            </div>

            <div class="annotation">
                <h1>Homeruns</h1>
                <p>The number of homeruns hit in major league baseball has been relatively consistent except for two distinct eras.</p>
            </div>
        </div>
    </body>
</html>